function main(stream) {
    try {
        const data = stream.data;
        const tokenAddress = "0xe442ca5f978d4fdaa4439572a4e02ca87171643d".toLowerCase();
        const topicHashes = [
            "0x51a8a3021cca9783553c24ea644f922e5e97b16a802b5368bba23ba78bb52599",
            "0xc8babebcee869bb138b3a671700e0aebedfa5a58154dd3d9061d3d66586006e2"
        ];

        const filteredReceipts = [];

        // بررسی ساختار داده‌ها و پردازش صحیح
        if (Array.isArray(data)) {
            // اگر داده‌ها آرایه هستند
            for (let i = 0; i < data.length; i++) {
                const item = data[i];
                
                // بررسی اینکه آیا آیتم یک receipt است یا آرایه‌ای از receipts
                if (item && item.logs && Array.isArray(item.logs)) {
                    // اگر آیتم خودش یک receipt است
                    const relevantLogs = item.logs.filter(log =>
                        log.address && 
                        log.address.toLowerCase() === tokenAddress &&
                        log.topics && 
                        log.topics[0] && 
                        topicHashes.includes(log.topics[0])
                    );
                    
                    if (relevantLogs.length > 0) {
                        filteredReceipts.push(item);
                    }
                } else if (Array.isArray(item)) {
                    // اگر آیتم یک آرایه است (ساختار قدیمی)
                    for (let j = 0; j < item.length; j++) {
                        const receipt = item[j];
                        if (receipt && receipt.logs && Array.isArray(receipt.logs)) {
                            const relevantLogs = receipt.logs.filter(log =>
                                log.address && 
                                log.address.toLowerCase() === tokenAddress &&
                                log.topics && 
                                log.topics[0] && 
                                topicHashes.includes(log.topics[0])
                            );
                            
                            if (relevantLogs.length > 0) {
                                filteredReceipts.push(receipt);
                            }
                        }
                    }
                }
            }
        }

        const tokenMetadata = {
            name: "Classic USDC",
            symbol: "$USDC",
            decimals: 18,
            blockchain: "Binance Smart Chain (BSC)",
            contractAddress: "0xe442Ca5f978D4fDAa4439572A4e02Ca87171643d",
            totalMaxSupply: "100,000,000,000",
            initialSupply: "50,000,000,000",
            officialWebsite: "https://classicusdc.edgeone.dev/",
            officialTwitter: "https://x.com/ClassicUSDC",
            contactEmail: "xlogan1987@gmail.com",
            logoUrl: "https://image2url.com/images/1766358725753-8877313f-7d60-41d2-9480-a327daafd554.png",
            currentPriceUSD: 0.8101,
            marketCapUSD: 40500000000,
            liquidityUSD: 10000000,
            listings: {
                coinCodex: "https://coincodex.com/crypto/classic-usdc-1/",
                geckoTerminal: "https://www.geckoterminal.com/bsc/pools/0x5c26901594373ff12409b7aa12ebcf8c9ae8dcd1",
                coinCheckup: "https://coincheckup.com/coins/classic-usdc-1",
                coinBoom: "https://coinboom.net/coin/classic-usdc-2",
                coinScope: "https://www.coinscope.co/coin/4-usdc",
                liveCoinWatch: "https://www.livecoinwatch.com/price/ClassicUSDC-__________USDC",
                bscScan: "https://bscscan.com/token/0xe442ca5f978d4fdaa4439572a4e02ca87171643d",
                dexTools: "https://www.dextools.io/app/en/bnb/pair-explorer/0x84d73260b05c797749bf5f1ff8669e7dd0cc376b?t=1766816077203",
                coinVote: "https://coinvote.cc/en/coin/Classic-USDC-S"
            },
            socialProof: {
                coinWingsAI1: "https://x.com/CoinWingsAI/status/2001724573700800893?s=20",
                coinWingsAI2: "https://x.com/CoinWingsAI/status/2001779286777463169?s=20",
                coinWingsAI3: "https://x.com/CoinWingsAI/status/2001175864973910299?s=20"
            },
            description: "Classic USDC ($USDC) is a premium BEP-20 token on the Binance Smart Chain, inspired by the timeless reliability of classic stablecoins. Built for massive DeFi adoption, payments, and growth, it features seamless PancakeSwap liquidity, flexible governance, and verified security.",
            whitepaper: `Introduction to Classic USDC Classic USDC ($USDC) is a cutting-edge BEP-20 token deployed on the Binance Smart Chain (BSC), drawing inspiration from the timeless reliability and stability of traditional stablecoins. Launched with a vision for long-term growth and widespread adoption, Classic USDC represents the perfect fusion of proven ERC-20 standards and innovative management features. This token is engineered to provide a secure, scalable, and community-oriented digital asset that empowers users in the evolving world of decentralized finance (DeFi). At its core, Classic USDC aims to deliver unparalleled utility in payments, trading, and ecosystem integrations while maintaining the highest standards of transparency and security.Vision and Mission The vision of Classic USDC is to become the premier digital currency on BSC, blending the classic dependability of established stablecoins with modern blockchain advancements. Our mission is to foster massive adoption by offering a token that is ready for real-world applications, explosive growth, and seamless integration into the broader crypto landscape. Classic USDC stands as a beacon of innovation, inviting holders to join an exciting journey toward the future of digital finance.
Tokenomics
Token Name: Classic USDC
Symbol: $USDC
Decimals: 18
Total Maximum Supply: 100,000,000,000 $USDC (100 billion)
Initial Supply: 50,000,000,000 $USDC (50 billion minted at launch)
Blockchain: Binance Smart Chain (BSC)
Contract Address: 0xe442Ca5f978D4fDAa4439572A4e02Ca87171643d
Standard: BEP-20 (fully compatible with ERC-20)
The generous supply structure is designed to support massive scalability, enabling broad distribution and high-volume utility in DeFi protocols, payments, and beyond.
Key Features and Highlights Classic USDC is built with advanced capabilities to ensure sustained success:
Seamless Integration: Pre-configured liquidity pair on PancakeSwap (Uniswap V2 router) for instant trading and effortless liquidity provision.
Flexible Governance: Owner-controlled features allow rapid adaptation to market dynamics, promoting stability, growth, and community benefits.
Security and Transparency: Fully verified source code on BscScan, with robust built-in safeguards for secure operations.
High Growth Potential: Positioned for community-driven expansion, strategic partnerships, and innovative ecosystem integrations.
These features make Classic USDC the ultimate choice for forward-thinking investors and users seeking the next major opportunity in cryptocurrency.
How Classic USDC Works Classic USDC operates as a standard BEP-20 token with enhanced controls:
Minting up to the max supply (owner-controlled, with toggleable functionality).
Burning capabilities for deflationary mechanics.
Whitelisting and pause options for transfers, buying, and selling to ensure smooth rollout and protection.
Direct integration with decentralized exchanges for immediate accessibility.
The contract prioritizes reliability, allowing the project to evolve while maintaining core stability.
Roadmap
Phase 1 (Completed): Contract deployment, initial mint, PancakeSwap pair creation, source code verification on BscScan.
Phase 2 (Ongoing): Community building, marketing push, liquidity enhancement, and website launch.
Phase 3: Major listings, partnerships, ecosystem expansions, and advanced utility integrations.
Phase 4: Achieve widespread adoption in DeFi, payments, and real-world applications, driving toward explosive growth.
The future is bright, with endless potential for Classic USDC to dominate the BSC landscape.
Final Words Classic USDC embodies the ideal balance of classic reliability and cutting-edge blockchain innovation. It is more than a token—it's a movement toward the next era of digital currency. Join the community today and be part of this epic journey. Hold $USDC and secure your place in the future of crypto!`
        };

        return {
            filteredReceipts,
            tokenMetadata
        };
    } catch (e) {
        return { error: e.message };
    }
}
